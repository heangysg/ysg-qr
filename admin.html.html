<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard | YSG</title>
  <link rel="stylesheet" href="style3.css" />
</head>
<body>
  <h1>Admin Receipt Table</h1>
  <table id="receipt-table">
    <thead>
      <tr>
        <th>Customer ID</th>
        <th>Name</th>
        <th>Phone</th>
        <th>Machine</th>
        <th>Date</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="receipts-body">
      <!-- Example row for test -->
      <tr id="receipt-123456">
        <td>Heang001</td>
        <td>Sok Heang</td>
        <td>0987654321</td>
        <td>YSG-MX20</td>
        <td>2024-05-01</td>
        <td><button onclick="downloadReceipt('123456')">Download</button></td>
      </tr>
    </tbody>
  </table>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    function downloadReceipt(id) {
      const row = document.getElementById(`receipt-${id}`);
      if (!row) {
        alert("Receipt not found!");
        return;
      }

      const container = document.createElement('div');
      container.className = 'receipt-content';
      container.innerHTML = `
        <h2>YSG Receipt</h2>
        <table>
          <tr><th>Customer ID</th><td>${row.children[0].textContent}</td></tr>
          <tr><th>Name</th><td>${row.children[1].textContent}</td></tr>
          <tr><th>Phone</th><td>${row.children[2].textContent}</td></tr>
          <tr><th>Machine</th><td>${row.children[3].textContent}</td></tr>
          <tr><th>Date</th><td>${row.children[4].textContent}</td></tr>
        </table>
      `;
      document.body.appendChild(container);

      html2canvas(container).then(canvas => {
        const link = document.createElement('a');
        link.download = `receipt-${id}.png`;
        link.href = canvas.toDataURL();
        link.click();
        document.body.removeChild(container);
      });
    }
  </script>
</body>
</html>
